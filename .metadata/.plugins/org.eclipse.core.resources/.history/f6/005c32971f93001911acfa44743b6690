package com.jiage.spinlock;

public class MainTest {
	public static void main(String[] args) {
		SpinLock sl = new SpinLock();

		new Thread(() -> {
			sl.lock();
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
			System.out.println("t1 run");
			sl.unLock();
		}).start();
		new Thread(() -> {
			sl.lock();
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
			System.out.println("t2 run");
			sl.unLock();
		}).start();
		new Thread(() -> {
			sl.lock();
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
			System.out.println("t3 run");
			sl.unLock();
		}).start();
		new Thread(() -> {
			sl.lock();
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
			System.out.println("t4 run");
			sl.unLock();
		}).start();

	}
}
