package com.jiage.classloader;

import java.io.File;
import java.util.StringTokenizer;

public class MainLoader {
	public static void main(String[] args) {
		File[] files = getExtDirs();
		System.out.println(files.length);

		ClassLoader systemLoader = ClassLoader.getSystemClassLoader();
		ClassLoader systemLoalderParent = systemLoader.getParent();
		ClassLoader systemLoalderParentParent = systemLoalderParent.getParent();

		System.out.println("systemLoader : " + systemLoader);
		System.out.println("systemLoalderParent : " + systemLoalderParent);
		System.out.println("systemLoalderParentParent : " + systemLoalderParentParent);
	}

	//ExtClassLoader加载的文件
	private static File[] getExtDirs() {
		// 加载<JAVA_HOME>/lib/ext目录中的类库
		String s = System.getProperty("java.ext.dirs");
		File[] dirs;
		if (s != null) {
			StringTokenizer st = new StringTokenizer(s, File.pathSeparator);
			int count = st.countTokens();
			dirs = new File[count];
			for (int i = 0; i < count; i++) {
				dirs[i] = new File(st.nextToken());
			}
		} else {
			dirs = new File[0];
		}
		return dirs;
	}
}
